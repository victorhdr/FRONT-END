{% extends "base.html" %}
{% block title %}Men√∫ - MiTienda{% endblock %}

{% block content %}
<section class="py-4">
  <div class="container">
    
    <h1 class="h3 mb-4 text-center">Men√∫ principal</h1>
    <p class="text-center text-muted mb-5">
      Hola, <strong>{{ user.email }}</strong> üëã <br>
      ¬øQu√© quieres hacer hoy?
    </p>

    <div class="row g-4 justify-content-center">

      <!-- Usuario -->
      <div class="col-12 col-sm-6 col-lg-3">
        <div class="card shadow-sm h-100 text-center p-3">
          <div class="card-body d-flex flex-column">
            <h4 class="h6">üë§ Usuario</h4>
            <p class="small flex-grow-1">Ver y editar tus datos b√°sicos.</p>
            <a href="{{ url_for('main.usuario') }}" class="btn btn-primary btn-sm mt-auto">
              Abrir
            </a>
          </div>
        </div>
      </div>

      <!-- Preferencias -->
      <div class="col-12 col-sm-6 col-lg-3">
        <div class="card shadow-sm h-100 text-center p-3">
          <div class="card-body d-flex flex-column">
            <h4 class="h6">‚öôÔ∏è Preferencias</h4>
            <p class="small flex-grow-1">Configura opciones de la aplicaci√≥n.</p>
            <a href="{{ url_for('main.preferencias') }}" class="btn btn-primary btn-sm mt-auto">
              Abrir
            </a>
          </div>
        </div>
      </div>

      <!-- Nuevo producto -->
      <div class="col-12 col-sm-6 col-lg-3">
        <div class="card shadow-sm h-100 text-center p-3">
          <div class="card-body d-flex flex-column">
            <h4 class="h6">‚ûï Nuevo producto</h4>
            <p class="small flex-grow-1">Crea un nuevo producto para el cat√°logo.</p>
            <a href="{{ url_for('main.nuevo') }}" class="btn btn-success btn-sm mt-auto">
              Crear
            </a>
          </div>
        </div>
      </div>

      <!-- Productos -->
      <div class="col-12 col-sm-6 col-lg-3">
        <div class="card shadow-sm h-100 text-center p-3">
          <div class="card-body d-flex flex-column">
            <h4 class="h6">üõçÔ∏è Productos</h4>
            <p class="small flex-grow-1">Explora el cat√°logo con im√°genes.</p>
            <a href="{{ url_for('main.productos') }}" class="btn btn-primary btn-sm mt-auto">
              Ver cat√°logo
            </a>
          </div>
        </div>
      </div>

      <!-- Opiniones seguras (Ejercicio 8.7) -->
      <div class="col-12 col-sm-6 col-lg-3">
        <div class="card shadow-sm h-100 text-center p-3">
          <div class="card-body d-flex flex-column">
            <h4 class="h6">üí¨ Opiniones seguras</h4>
            <p class="small flex-grow-1">CSRF, CORS y XSS seguro.</p>
            <a href="{{ url_for('main.opiniones') }}" class="btn btn-primary btn-sm mt-auto">
              Abrir
            </a>
          </div>
        </div>
      </div>

    </div>

    <!-- üîµ Bot√≥n AJAX cl√°sico GET -->
    <div class="text-center mt-5">
      <button id="btnAjaxGet" class="btn btn-outline-primary">
        Cargar productos v√≠a AJAX (GET)
      </button>
    </div>

    <!-- üîµ Bot√≥n AJAX cl√°sico POST -->
    <div class="text-center mt-3">
      <button id="btnAjaxPost" class="btn btn-outline-secondary">
        Enviar JSON v√≠a AJAX (POST)
      </button>
    </div>

    <!-- üî∂ AJAX con timeout -->
    <div class="text-center mt-3">
      <button id="btnAjaxTimeout" class="btn btn-outline-warning">
        Probar AJAX con timeout (2s)
      </button>
    </div>

    <!-- üî∂ Cancelar petici√≥n AJAX -->
    <div class="text-center mt-2">
      <button id="btnAjaxAbort" class="btn btn-outline-danger">
        Cancelar petici√≥n AJAX
      </button>
    </div>

    <!-- üü¶ Ejercicio 8.5 - uso avanzado de fetch() -->
    <div class="text-center mt-4">
      <button id="btnFetchCatalogo" class="btn btn-info">
        Recargar cat√°logo (fetch)
      </button>
    </div>

    <!-- Bot√≥n para mostrar / ocultar cat√°logo -->
    <div class="text-center mt-2">
      <button id="btnToggleCatalogo" class="btn btn-outline-dark d-none">
        Ocultar cat√°logo
      </button>
    </div>

    <!-- Contenedor del cat√°logo din√°mico -->
    <div id="zonaFetch" class="row g-4 mt-4 justify-content-center"></div>

  </div>
</section>

<!-- Scripts AJAX -->
<script src="{{ url_for('static', filename='js/ajaxGetProducts.js') }}"></script>
<script src="{{ url_for('static', filename='js/ajaxPostJson.js') }}"></script>
<script src="{{ url_for('static', filename='js/ajaxTimeoutAbort.js') }}"></script>

<!-- Script fetch() del Ejercicio 8.5 -->
<script src="{{ url_for('static', filename='js/fetchCatalog.js') }}"></script>

{% endblock %}
